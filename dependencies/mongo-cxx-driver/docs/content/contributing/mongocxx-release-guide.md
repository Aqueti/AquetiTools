+++
date = "2016-08-15T16:11:58+05:30"
title = "Releasing the mongocxx driver"
[menu.main]
  weight = 20
  parent="contributing"
+++

## Releasing the mongocxx driver

## Confirm Version Status in Jira

- Ensure that all tickets under the version to be released are in
  'Resolved' status on the C++ Driver [project
  page](https://jira.mongodb.org/browse/CXX/?selectedTab=com.atlassian.jira.jira-projects-plugin:versions-panel)

## Create a BUMP commit

This commit essentially removes the -pre (e.g. 1.0.0-rc79-pre ->
1.0.0-rc79) and creates what is considered the final commit in the release.

*  If you haven't already, clone the mongodb-cxx-driver repository

```
git clone git@github.com:mongodb/mongo-cxx-driver.git 
cd mongo-cxx-driver
```

* Otherwise, pull the latest code down from the origin with `git pull`
* Update the following files (changing version numbers to remove the "-pre"
  for the MONGOCXX_VERSION_EXTRA and BSONCXX_VERSION_EXTRA variables):
    * [`src/mongocxx/CMakeLists.txt`](https://github.com/mongodb/mongo-cxx-driver/blob/master/src/mongocxx/CMakeLists.txt#L30)
    * [`src/bsoncxx/CMakeLists.txt`](https://github.com/mongodb/mongo-cxx-driver/blob/master/src/bsoncxx/CMakeLists.txt#L22) 
* Commit with message "BUMP rx.y.z[-rcq]", e.g.:

```
git commit -am "BUMP r3.0.1"
git push origin master
```

Pushing the BUMP commit to the origin will kick off builds in Evergreen,
Travis CI and AppVeyor (which handles Windows builds). Wait for all three
builds to finish and pass, re-running any timeout/spot failures.

## Tag the Release

* Create an tag for the commit that will serve as the release (or release candidate), eg:

```
git tag r3.0.1
git push origin r3.0.1
```

## Draft & Publish GitHub Release Notes

* Hit up the [GitHub releases
  page](https://github.com/mongodb/mongo-cxx-driver/releases)
* Copy the previous announcement and modify with release-specific information
    * The "Known Issues", "Bug", and "Improvement" sections are generated by JIRA. Click on the specific version of the [C++ Driver Project](https://jira.mongodb.org/browse/CXX/?selectedTab=com.atlassian.jira.jira-projects-plugin:versions-panel) and on the version Summary page there is a link for "Release Notes" where you can copy the HTML and paste it into the GitHub Release Notes markdown.
* Draft and publish a new release against the tag you just pushed

## Release the Version in Jira 

* Go
  [here](https://jira.mongodb.org/plugins/servlet/project-config/CXX/versions)
* Close all the the Resolved tickets via a [bulk transition](https://confluence.atlassian.com/jira/modifying-multiple-bulk-issues-185729606.html)
* Click the cog next to the version you are about to release and select "Release"
* Follow the dialogs/wizards and whatnot, setting the release date to the current date

## Generate and Publish Documentation

* Clone the [apidocs repo](https://github.com/mongodb/apidocs)

```
git clone git@github.com:10gen/apidocs.git
cd apidocs
```

* On the command line, run:

```
python2 build.py cxx11
git commit -am "bump for cxx driver release"
git push origin master
```

## Create the Next Version commit

* Update the following files (changing version numbers to bump to the next version number and add the "-pre" suffix for the MONGOCXX_VERSION_EXTRA and BSONCXX_VERSION_EXTRA variables):
    * [`src/mongocxx/CMakeLists.txt`](https://github.com/mongodb/mongo-cxx-driver/blob/master/src/mongocxx/CMakeLists.txt#L30)
    * [`src/bsoncxx/CMakeLists.txt`](https://github.com/mongodb/mongo-cxx-driver/blob/master/src/bsoncxx/CMakeLists.txt#L22) 
* Commit with message "post rx.y.z[-rcq]", e.g.:

```
git commit -am "post r3.0.1"
git push origin master
```

## Email Google Groups

* Send it to mongodb-announce@googlegroups.com AND mongodb-user@googlegroups.com
* Template:

> The MongoDB C++ Driver Team is very excited to announce the availability of version X.Y.Z of the new MongoDB C++11 driver.
> We are not promising API or ABI stability until the 3.1.0 release so that we can meaningfully incorporate user feedback after the 3.0.0 GA. We will make every effort to minimize API changes.  The new driver is incompatible with the prior legacy, 26compat, and server C++ drivers.
>
> You can obtain the source for the new driver from GitHub, either under the rX.Y.Z tag or from the releases page. General documentation for the new driver is available on the github wiki. Doxygen API documentation is also available.
>
> Please feel free to post any questions to the mongodb-user mailing list. Bug reports should be filed against the CXX project in the MongoDB JIRA. If you are interested in participating in the development of the C++11 driver, questions should be sent to the mongodb-dev mailing list. Github pull requests are welcome, and should be issued against the master branch of the repository, where the C++11 driver is developed.
> We look forward to hearing from you. Happy C++11â€™ing!
>
> Thank You,
> The MongoDB C++ Driver Team

